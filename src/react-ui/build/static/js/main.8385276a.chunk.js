(this["webpackJsonpalive-flowers"]=this["webpackJsonpalive-flowers"]||[]).push([[0],{151:function(t,e){},152:function(t,e){},161:function(t,e,c){},162:function(t,e,c){},163:function(t,e,c){},164:function(t,e,c){},166:function(t,e,c){},167:function(t,e,c){},168:function(t,e,c){"use strict";c.r(e);var a=c(1),s=c(57),r=c.n(s),l=c(21),i=(c(161),c(22)),o=(c(162),60),n={"rgb(255, 100, 0)":{r:255,g:100,b:0},"rgb(255, 20, 147)":{r:255,g:20,b:147},"rgb(200, 0, 255)":{r:200,g:0,b:255},"rgb(0, 255, 255)":{r:0,g:255,b:255},"rgb(0, 225, 0)":{r:0,g:225,b:0},"rgb(255, 255, 0)":{r:255,g:255,b:0}},g={"rgb(255, 100, 0)":"rgb(251, 206, 91)","rgb(255, 20, 147)":"rgb(248, 184, 211)","rgb(200, 0, 255)":"rgb(186, 111, 168)","rgb(0, 255, 255)":"rgb(162, 218, 219)","rgb(0, 225, 0)":"rgb(213, 226, 116)","rgb(255, 255, 0)":"rgb(255, 248, 161)"},m="rgb(255, 255, 255)",u=c.p+"static/media/logo.ea23c954.svg",b=(c(163),c(164),c(0)),j=function(t){var e=t.timeLeft,c=t.timerClass,a=void 0===c?"":c;return e<=0&&(e=o),Object(b.jsx)("section",{className:a?"timer ".concat(a):"timer",children:e})},f=(c(166),c.p+"static/media/main-bg.f8215fc8.jpg"),d=c.p+"static/media/main-bg-blue.f8e708b8.jpg",v=c.p+"static/media/main-bg-green.d9f1c009.jpg",O={"rgb(255, 255, 255)":f,"rgb(251, 206, 91)":c.p+"static/media/main-bg-orange.087156be.jpg","rgb(248, 184, 211)":c.p+"static/media/main-bg-pink.7e61175a.jpg","rgb(186, 111, 168)":c.p+"static/media/main-bg-violet.0e479edf.jpg","rgb(162, 218, 219)":d,"rgb(213, 226, 116)":v,"rgb(255, 248, 161)":c.p+"static/media/main-bg-yellow.94fa6b70.jpg"},p=function(t){var e=t.activeColor,c=e||m;return Object(b.jsxs)("section",{className:"flowers-field",children:[Object.keys(O).map((function(t){return Object(b.jsx)("img",{alt:"Alive Flowers are watching you",className:t===c?"flowers active":"flowers",src:O[t]},t)})),Object(b.jsx)("p",{className:"flowers-info",children:"\u041e\u0431\u0435\u0440\u0438 \u043c\u0435\u043d\u0456 \u0432\u0456\u0434\u0442\u0456\u043d\u043e\u043a \u0442\u0430 \u0437\u0430\u0444\u0430\u0440\u0431\u0443\u0439 \u043a\u0432\u0456\u0442\u043a\u0438."})]})},_=function(t){var e=t.gameTime,c=t.activeColor,a=t.setActiveColor,s=t.mqtt,r=localStorage.getItem("user_id");r||(r=Math.floor(1e5*Math.random()),localStorage.setItem("user_id",r));var l=function(t){s.publish("flowers/ESP_LED/set",function(t,e,c,a){return'{"state": "ON","brightness": 255,"color": '.concat(JSON.stringify(t),',"transition": 0,"user_id": ').concat(JSON.stringify(e),',"endSes_d": ').concat(c,',"idle_d": ').concat(a,"}")}(n[t],r,o,30)),a(t)};return Object(b.jsxs)("section",{className:"controls-wrap",children:[Object(b.jsx)(p,{activeColor:g[c]}),Object(b.jsxs)("section",{className:"controls",children:[Object(b.jsx)("ul",{children:Object.keys(n).map((function(t,e){return Object(b.jsx)("li",{className:c===t?"button-".concat(e+1," active"):"button-".concat(e+1),onClick:function(){return l(t)},style:{background:g[t]}},t)}))}),Object(b.jsx)(j,{timerClass:"controls-timer",timeLeft:e})]})]})},x=(c(167),c.p+"static/media/lotus-aqua.e0d01c2a.svg"),h=c.p+"static/media/lotus-green.92564941.svg",N=c.p+"static/media/lotus-orange.17c89be0.svg",I=c.p+"static/media/lotus-pink.87b2eeeb.svg",S=c.p+"static/media/lotus-violet.8a14d3ad.svg",w=c.p+"static/media/lotus-yellow.dc894035.svg",k=function(){return Object(b.jsxs)("section",{className:"locked-screen",children:[Object(b.jsx)("p",{className:"locked-info",children:"\u0414\u044f\u043a\u0443\u044e \u0437\u0430 \u0442\u0432\u0456\u0439 \u0434\u043e\u0442\u0438\u043a!"}),Object(b.jsx)("p",{children:"\u0422\u0438 \u0441\u043f\u0440\u0430\u0432\u0436\u043d\u0456\u0439 \u043c\u0438\u0442\u0435\u0446\u044c."}),Object(b.jsx)("p",{children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439 \u0449\u0435 \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u0440\u0443 \u0445\u0432\u0438\u043b\u0438\u043d\u0438."}),Object(b.jsxs)("div",{className:"locked-img",children:[Object(b.jsx)("img",{className:"lotus-1",src:x,alt:"lotusAqua"}),Object(b.jsx)("img",{className:"lotus-2",src:h,alt:"lotusGreen"}),Object(b.jsx)("img",{className:"lotus-3",src:N,alt:"lotusOrange"}),Object(b.jsx)("img",{className:"lotus-4",src:I,alt:"lotusPink"}),Object(b.jsx)("img",{className:"lotus-5",src:S,alt:"lotusViolet"}),Object(b.jsx)("img",{className:"lotus-6",src:w,alt:"lotusYellow"})]})]})},C=function(){return Object(b.jsxs)("section",{className:"locked-screen",children:[Object(b.jsx)("p",{className:"locked-info",children:"\u0417\u0430\u0447\u0435\u043a\u0430\u0439\u0442\u0435,"}),Object(b.jsx)("p",{children:"\u0437\u0430\u0440\u0430\u0437 \u0443\u043f\u0440\u0430\u0432\u043bi\u043d\u043d\u044f"}),Object(b.jsx)("p",{children:"\u043a\u0438\u043c\u043e\u0441\u044c \u0437\u0430\u0439\u043d\u044f\u0442\u0435"}),Object(b.jsxs)("div",{className:"locked-img",children:[Object(b.jsx)("img",{className:"lotus-1",src:x,alt:"lotusAqua"}),Object(b.jsx)("img",{className:"lotus-2",src:h,alt:"lotusGreen"}),Object(b.jsx)("img",{className:"lotus-3",src:N,alt:"lotusOrange"}),Object(b.jsx)("img",{className:"lotus-4",src:I,alt:"lotusPink"}),Object(b.jsx)("img",{className:"lotus-5",src:S,alt:"lotusViolet"}),Object(b.jsx)("img",{className:"lotus-6",src:w,alt:"lotusYellow"})]})]})},y=Object(l.subscribe)({topic:"flowers/ESP_LED"})((function(t){var e=t.activeColor,c=t.setActiveColor,s=t.data,r=t.mqtt,l=Object(a.useState)(null),n=Object(i.a)(l,2),g=n[0],m=n[1];Object(a.useEffect)((function(){if(s&&s.length){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,c){return"b"===c?"".concat(e).concat(t[c],")"):"".concat(e).concat(t[c],", ")}),"rgb(")}(s[0].color);c(t)}return null}),[s,c]),Object(a.useEffect)((function(){return u()})),Object(a.useEffect)((function(){var t=setInterval((function(){var t=parseInt(localStorage.getItem("gm_active_till_t")),e=t&&t-(new Date).getTime()>0?Math.floor((t-(new Date).getTime())/1e3):0;m(e)}),1e3);return function(){return clearInterval(t)}}),[g]);var u=function(){var t=new Date,e=null===t||void 0===t?void 0:t.getTime(),c=parseInt(localStorage.getItem("gm_active_till_t"));c&&e<c&&m(Math.round((c-e)/1e3))},j=localStorage.getItem("user_id");j?j=parseInt(j):(j=Math.floor(1e5*Math.random()),localStorage.setItem("user_id",j));var f=(new Date).getTime();if(s[0]){var d=parseInt(localStorage.getItem("gm_active_till_t"));d-f<-60&&(localStorage.removeItem("gm_active_till_t"),d=null);var v=parseInt(s[0].user_active);if(0===v){var O=parseInt(localStorage.getItem("gm_active_till_t"));if(O&&f<O+o)return Object(b.jsx)(k,{})}else if(v){if(v!==j)return localStorage.removeItem("gm_active_till_t"),Object(b.jsx)(k,{});var p=localStorage.getItem("active_last_t");(!p||parseInt(p)<f-6e4)&&localStorage.setItem("active_last_t",f),localStorage.getItem("gm_active_till_t")||localStorage.setItem("gm_active_till_t",Math.floor(f+6e4))}}else{var x=localStorage.getItem("gm_active_till_t");if(x&&f>(x=parseInt(x))&&f<x+o){var h=localStorage.getItem("active_last_t");return!h||parseInt(h)<f-36e5?Object(b.jsx)(C,{}):Object(b.jsx)(k,{})}}return Object(b.jsx)(_,{mqtt:r,gameTime:g,activeColor:e,setActiveColor:c})})),E=function(){var t=Object(a.useState)(m),e=Object(i.a)(t,2),c=e[0],s=e[1];return Object(b.jsxs)("section",{className:"game",children:[Object(b.jsx)("a",{href:"https://tsum.ua/",className:"logo",target:"_blank",rel:"noreferrer",children:Object(b.jsx)("img",{src:u,alt:"\u0426\u0423\u041c \u041a\u0438\u0435\u0432"})}),Object(b.jsx)(y,{activeColor:c,setActiveColor:s})]})},T=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,169)).then((function(e){var c=e.getCLS,a=e.getFID,s=e.getFCP,r=e.getLCP,l=e.getTTFB;c(t),a(t),s(t),r(t),l(t)}))};r.a.render(Object(b.jsx)(l.Connector,{mqttProps:"ws://10.42.0.1:9001",children:Object(b.jsx)(E,{})}),document.getElementById("root")),T()},69:function(t,e){},71:function(t,e){}},[[168,1,2]]]);
//# sourceMappingURL=main.8385276a.chunk.js.map