(this["webpackJsonpalive-flowers"]=this["webpackJsonpalive-flowers"]||[]).push([[0],{151:function(t,e){},152:function(t,e){},161:function(t,e,a){},162:function(t,e,a){},163:function(t,e,a){},164:function(t,e,a){},166:function(t,e,a){},167:function(t,e,a){},168:function(t,e,a){"use strict";a.r(e);var c=a(1),r=a(57),s=a.n(r),i=a(22),o=(a(161),a(11)),n=(a(162),Number.parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MQTT_BROKER_URL:"ws://10.42.0.1:9001"}).REACT_APP_GAME_TIME_PLAY)||30),l={"rgb(255, 100, 0)":{r:255,g:100,b:0},"rgb(255, 20, 147)":{r:255,g:20,b:147},"rgb(200, 0, 255)":{r:200,g:0,b:255},"rgb(0, 255, 255)":{r:0,g:255,b:255},"rgb(0, 225, 0)":{r:0,g:225,b:0},"rgb(255, 255, 0)":{r:255,g:255,b:0}},g={"rgb(255, 100, 0)":"rgb(251, 206, 91)","rgb(255, 20, 147)":"rgb(248, 184, 211)","rgb(200, 0, 255)":"rgb(186, 111, 168)","rgb(0, 255, 255)":"rgb(162, 218, 219)","rgb(0, 225, 0)":"rgb(213, 226, 116)","rgb(255, 255, 0)":"rgb(255, 248, 161)"},m="rgb(255, 255, 255)",b=a.p+"static/media/logo.ea23c954.svg",u=(a(163),a(164),a(0)),j=function(t){var e=t.timeLeft,a=t.timerClass,c=void 0===a?"":a,r=function(t){var e=Math.floor(t/60%60),a=Math.floor(t%60);return t<=0?["",""]:["0".concat(e),a<10?"0".concat(a):a]}(e),s=Object(o.a)(r,2),i=s[0],n=s[1];return Object(u.jsxs)("section",{className:c?"timer ".concat(c):"timer",children:[i," : ",n]})},f=(a(166),a.p+"static/media/main-bg.9adcafc5.jpg"),v=a.p+"static/media/main-bg-blue.b3ef2b3d.jpg",d=a.p+"static/media/main-bg-green.f11eab07.jpg",O={"rgb(255, 255, 255)":f,"rgb(251, 206, 91)":a.p+"static/media/main-bg-orange.23e65c89.jpg","rgb(248, 184, 211)":a.p+"static/media/main-bg-pink.8f3a7f19.jpg","rgb(186, 111, 168)":a.p+"static/media/main-bg-violet.43cfa96b.jpg","rgb(162, 218, 219)":v,"rgb(213, 226, 116)":d,"rgb(255, 248, 161)":a.p+"static/media/main-bg-yellow.b7b639e8.jpg"},_=function(t){var e=t.activeColor,a=e||m;return Object(u.jsxs)("section",{className:"flowers-field",children:[Object.keys(O).map((function(t){return Object(u.jsx)("img",{alt:"Alive Flowers are watching you",className:t===a?"flowers active":"flowers",src:O[t]},t)})),Object(u.jsx)("p",{className:"flowers-info",children:"\u041e\u0431\u0435\u0440\u0438 \u043c\u0435\u043d\u0456 \u0432\u0456\u0434\u0442\u0456\u043d\u043e\u043a \u0442\u0430 \u0437\u0430\u0444\u0430\u0440\u0431\u0443\u0439 \u043a\u0432\u0456\u0442\u043a\u0438."})]})},p=function(t){var e=t.gameTime,a=t.activeColor,c=t.setActiveColor,r=t.mqtt,s=localStorage.getItem("user_id");s||(s=Math.floor(1e5*Math.random()),localStorage.setItem("user_id",s));var i=function(t){r.publish("flowers/ESP_LED/set",function(t,e){return'{"state": "ON","brightness": 255,"color": '.concat(JSON.stringify(t),',"transition": 0,"user_id": ').concat(JSON.stringify(e),"}")}(l[t],s)),c(t)};return Object(u.jsxs)("section",{className:"controls-wrap",children:[Object(u.jsx)(_,{activeColor:g[a]}),Object(u.jsxs)("section",{className:"controls",children:[Object(u.jsx)("ul",{children:Object.keys(l).map((function(t,e){return Object(u.jsx)("li",{className:a===t?"button-".concat(e+1," active"):"button-".concat(e+1),onClick:function(){return i(t)},style:{background:g[t]}},t)}))}),Object(u.jsx)(j,{timerClass:"controls-timer",timeLeft:e})]})]})},S=(a(167),a.p+"static/media/lotus-aqua.e0d01c2a.svg"),h=a.p+"static/media/lotus-green.92564941.svg",I=a.p+"static/media/lotus-orange.17c89be0.svg",x=a.p+"static/media/lotus-pink.87b2eeeb.svg",w=a.p+"static/media/lotus-violet.8a14d3ad.svg",N=a.p+"static/media/lotus-yellow.dc894035.svg",T=function(){return Object(u.jsxs)("section",{className:"locked-screen",children:[Object(u.jsx)("p",{className:"locked-info",children:"\u0414\u044f\u043a\u0443\u044e \u0437\u0430 \u0442\u0432\u0456\u0439 \u0434\u043e\u0442\u0438\u043a!"}),Object(u.jsx)("p",{children:"\u0422\u0438 \u0441\u043f\u0440\u0430\u0432\u0436\u043d\u0456\u0439 \u043c\u0438\u0442\u0435\u0446\u044c."}),Object(u.jsx)("p",{children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439 \u0449\u0435 \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u0440\u0443 \u0445\u0432\u0438\u043b\u0438\u043d\u0438."}),Object(u.jsxs)("div",{className:"locked-img",children:[Object(u.jsx)("img",{className:"lotus-1",src:S,alt:"lotusAqua"}),Object(u.jsx)("img",{className:"lotus-2",src:h,alt:"lotusGreen"}),Object(u.jsx)("img",{className:"lotus-3",src:I,alt:"lotusOrange"}),Object(u.jsx)("img",{className:"lotus-4",src:x,alt:"lotusPink"}),Object(u.jsx)("img",{className:"lotus-5",src:w,alt:"lotusViolet"}),Object(u.jsx)("img",{className:"lotus-6",src:N,alt:"lotusYellow"})]})]})},C=Object(i.subscribe)({topic:"flowers/ESP_LED"})((function(t){var e=t.activeColor,a=t.setActiveColor,r=t.data,s=t.mqtt,i=Object(c.useState)(null),l=Object(o.a)(i,2),g=l[0],m=l[1],b=localStorage.getItem("gameActive"),j=!b||JSON.parse(b),f=Object(c.useState)(j),v=Object(o.a)(f,2),d=v[0];v[1];Object(c.useEffect)((function(){if(r&&r.length){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,a){return"b"===a?"".concat(e).concat(t[a],")"):"".concat(e).concat(t[a],", ")}),"rgb(")}(r[0].color);a(t)}return null}),[r]),Object(c.useEffect)((function(){return O()}),[d]),Object(c.useEffect)((function(){0===g&&localStorage.setItem("gameActive",!d);var t=setInterval((function(){var t=parseInt(localStorage.getItem("gm_active_till_t")),e=t&&t-(new Date).getTime()>0?Math.floor((t-(new Date).getTime())/1e3):0;m(e)}),1e3);return function(){return clearInterval(t)}}),[g]);var O=function(){var t=localStorage.getItem("activeTime"),e=(JSON.parse(localStorage.getItem("gameActive")),new Date),a=null===e||void 0===e?void 0:e.getTime();t=parseInt(t);var c=parseInt(localStorage.getItem("gm_active_till_t"));c&&a<c&&m(Math.round((c-a)/1e3))},_=localStorage.getItem("user_id");if(_?_=parseInt(_):(_=Math.floor(1e5*Math.random()),localStorage.setItem("user_id",_)),r[0]){var S=parseInt(localStorage.getItem("gm_active_till_t"));S-(new Date).getTime()<-n&&(localStorage.removeItem("gm_active_till_t"),S=null),S&&(S=S);var h=parseInt(r[0].user_active);if(0===h){var I=parseInt(localStorage.getItem("gm_active_till_t"));if(I&&(new Date).getTime()<I+n)return Object(u.jsx)(T,{})}else if(h){if(h!==_)return localStorage.removeItem("gm_active_till_t"),Object(u.jsx)(T,{});localStorage.getItem("gm_active_till_t")||localStorage.setItem("gm_active_till_t",Math.floor((new Date).getTime()+1e3*n))}}else{var x=localStorage.getItem("gm_active_till_t");if(x&&(x=parseInt(x),(new Date).getTime()>x&&(new Date).getTime()<x+n))return Object(u.jsx)(T,{})}return Object(u.jsx)(p,{mqtt:s,gameTime:g,activeColor:e,setActiveColor:a})})),E=function(){var t=Object(c.useState)(m),e=Object(o.a)(t,2),a=e[0],r=e[1];return Object(u.jsxs)("section",{className:"game",children:[Object(u.jsx)("a",{href:"https://tsum.ua/",className:"logo",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("img",{src:b,alt:"\u0426\u0423\u041c \u041a\u0438\u0435\u0432"})}),Object(u.jsx)(C,{activeColor:a,setActiveColor:r})]})},A=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,169)).then((function(e){var a=e.getCLS,c=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;a(t),c(t),r(t),s(t),i(t)}))};s.a.render(Object(u.jsx)(i.Connector,{mqttProps:"ws://10.42.0.1:9001",children:Object(u.jsx)(E,{})}),document.getElementById("root")),A()},69:function(t,e){},71:function(t,e){}},[[168,1,2]]]);
//# sourceMappingURL=main.1c2db829.chunk.js.map