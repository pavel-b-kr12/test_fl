{"version":3,"sources":["const.js","assets/logo.svg","utils.js","components/CountDownTimer/CountDownTimer.jsx","assets/main-bg.jpg","assets/main-bg-blue.jpg","assets/main-bg-green.jpg","components/Flowers/Flowers.jsx","assets/main-bg-orange.jpg","assets/main-bg-pink.jpg","assets/main-bg-violet.jpg","assets/main-bg-yellow.jpg","components/Controls/Controls.jsx","assets/lotus-aqua.svg","assets/lotus-green.svg","assets/lotus-orange.svg","assets/lotus-pink.svg","assets/lotus-violet.svg","assets/lotus-yellow.svg","components/LockedScreen/LockedScreen.jsx","assets/timer-bg.svg","components/ScreenTest/ScreenTest.jsx","components/Game/Game.jsx","components/App/App.jsx","reportWebVitals.js","index.js"],"names":["MQTT_TOPIC_PUBLISH","GAME_TIME_PLAY","COLORS","FAKE_COLORS","COLOR_DEFAULT","user_id","parseInt","localStorage","getItem","Math","floor","random","setItem","generateMessage","color","endSes_d","idle_d","JSON","stringify","CountDownTimer","timeLeft","timerClass","className","flowers","backgroundImage","backgroundImageBlue","backgroundImageGreen","Flowers","activeColor","activeFlower","Object","keys","map","flower","alt","src","Controls","gameTime","setActiveColor","mqtt","i","onClick","publish","onSelectColor","style","background","LockedScreen0","lotusAqua","lotusGreen","lotusOrange","lotusPink","lotusViolet","lotusYellow","ScreenTest","onSelectEff","effNm","req","generateMessageTest","console","log","onSetC","r","g","b","getCountdown","now_t","Date","getTime","gm_active_till_t","abs","round","useState","countdown_t","setCountdown","useEffect","timer","setInterval","clearInterval","timerBg","subscribe","topic","data","setGameTime","length","reduce","rgbStr","col","rgbStringify","setGameTimer","countdown","bRunRecently","removeItem","redir","window","location","href","user_active","search","includes","App","target","rel","logo","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","mqttProps","process","document","getElementById"],"mappings":"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","file":"static/js/main.b3257590.chunk.js","sourcesContent":["export const MQTT_TOPIC_SUBSCRIBE = 'flowers/ESP_LED';\nexport const MQTT_TOPIC_PUBLISH = 'flowers/ESP_LED/set';\n\n//export const GAME_TIME_PLAY = Number.parseInt(process.env.REACT_APP_GAME_TIME_PLAY) || 60; //send MQTT as 'endSes_d'\nexport const GAME_TIME_PLAY = 60; //send MQTT as 'endSes_d'\nexport const idle_d = 30; //send MQTT as 'idle_d'\n\nexport const COLORS = {\n  'rgb(255, 100, 0)': { \"r\": 255, \"g\": 100, \"b\": 0 }, // orange\n  'rgb(255, 20, 147)': { \"r\": 255, \"g\": 20, \"b\": 147 }, // pink\n  'rgb(200, 0, 255)': { \"r\": 200, \"g\": 0, \"b\": 255 }, // violet\n  'rgb(0, 255, 255)': { \"r\": 0, \"g\": 255, \"b\": 255 }, // aqua\n  'rgb(0, 225, 0)': { \"r\": 0, \"g\": 225, \"b\": 0 }, // green\n  'rgb(255, 255, 0)': { \"r\": 255, \"g\": 255, \"b\": 0 } // yellow\n};\n\nexport const FAKE_COLORS = {\n  'rgb(255, 100, 0)': 'rgb(251, 206, 91)',\n  'rgb(255, 20, 147)': 'rgb(248, 184, 211)',\n  'rgb(200, 0, 255)': 'rgb(186, 111, 168)',\n  'rgb(0, 255, 255)': 'rgb(162, 218, 219)',\n  'rgb(0, 225, 0)': 'rgb(213, 226, 116)',\n  'rgb(255, 255, 0)': 'rgb(255, 248, 161)'\n}\n\nexport const COLOR_DEFAULT = 'rgb(255, 255, 255)';\n\nexport var user_id = parseInt(localStorage.getItem('user_id'));\nif(!user_id)\n{\n\tuser_id=Math.floor(Math.random()*100000);\n\tlocalStorage.setItem('user_id',user_id);\n}\n","export default __webpack_public_path__ + \"static/media/logo.ea23c954.svg\";","// import {\n  // GAME_TIME_PLAY\n// } from '../src/const';\n\nexport const generateMessage = (color,user_id, endSes_d, idle_d) => (\n  `{\"state\": \"ON\",\"brightness\": 255,\"color\": ${JSON.stringify(color)},\"transition\": 0,\"user_id\": ${JSON.stringify(user_id)},\"endSes_d\": ${endSes_d},\"idle_d\": ${idle_d}}`\n);\nexport const generateMessageTest = (color,user_id, endSes_d, idle_d, effNm) => (\n  `{\"state\": \"ON\",\"brightness\": 255,\"color\": ${JSON.stringify(color)},\"transition\": 0,\"user_id\": ${JSON.stringify(user_id)},\"endSes_d\": ${endSes_d},\"idle_d\": ${idle_d},\"effect\":${effNm}}`\n);\n\nexport const rgbStringify = (color = {}) => Object.keys(color).reduce((rgbStr, col) => (col === 'b'\n    ? `${rgbStr}${color[col]})`\n    : `${rgbStr}${color[col]}, `\n  ), 'rgb(');\n\nexport const calculateTimeLeft = (time) => {\n  const minutes = Math.floor((time / 60) % 60);\n  const seconds = Math.floor(time % 60);\n  if(time<=0) return ['','']; //blank w dots\n  //if(time<=0) return ['0',GAME_TIME_PLAY];\n  return [\n    `0${minutes}`,\n    seconds < 10 ? `0${seconds}` : seconds\n  ]\n};\n","import React from 'react';\nimport {\n  GAME_TIME_PLAY\n} from '../../const';\n\nimport './styles.css';\n//import { calculateTimeLeft } from '../../utils';\n\nconst CountDownTimer = ({ timeLeft, timerClass = '' }) => {\n\t//sec only\n\tif(timeLeft<=0) timeLeft=GAME_TIME_PLAY;\n  return (\n    <section className={timerClass ? `timer ${timerClass}` : 'timer'}>\n      {timeLeft}\n    </section>\n  )\n  /* //min:sec\n  const [minutes, seconds] = calculateTimeLeft(timeLeft);\n\n  return (\n    <section className={timerClass ? `timer ${timerClass}` : 'timer'}>\n      {minutes} : {seconds}\n    </section>\n  )\n  */\n};\n\nexport default CountDownTimer;\n","export default __webpack_public_path__ + \"static/media/main-bg.f8215fc8.jpg\";","export default __webpack_public_path__ + \"static/media/main-bg-blue.f8e708b8.jpg\";","export default __webpack_public_path__ + \"static/media/main-bg-green.d9f1c009.jpg\";","import React from 'react';\n\nimport './styles.css';\nimport backgroundImage from '../../assets/main-bg.jpg';\nimport backgroundImageBlue from '../../assets/main-bg-blue.jpg';\nimport backgroundImageGreen from '../../assets/main-bg-green.jpg';\nimport backgroundImageOrange from '../../assets/main-bg-orange.jpg';\nimport backgroundImagePink from '../../assets/main-bg-pink.jpg';\nimport backgroundImageViolet from '../../assets/main-bg-violet.jpg';\nimport backgroundImageYellow from '../../assets/main-bg-yellow.jpg';\nimport { COLOR_DEFAULT } from '../../const';\n\nconst flowers = {\n  'rgb(255, 255, 255)': backgroundImage,\n  'rgb(251, 206, 91)': backgroundImageOrange,\n  'rgb(248, 184, 211)': backgroundImagePink,\n  'rgb(186, 111, 168)': backgroundImageViolet,\n  'rgb(162, 218, 219)': backgroundImageBlue,\n  'rgb(213, 226, 116)': backgroundImageGreen,\n  'rgb(255, 248, 161)': backgroundImageYellow\n}\n\nconst Flowers = ({ activeColor }) => {\n  const activeFlower = activeColor ? activeColor : COLOR_DEFAULT;\n\n  return (\n    <section className='flowers-field'>\n      {Object.keys(flowers).map(flower => (\n        <img\n          key={flower}\n          alt=\"Alive Flowers are watching you\"\n          className={flower === activeFlower ? `flowers active` : 'flowers'}\n          src={flowers[flower]}\n         />\n      ))}\n      <p className='flowers-info'>Обери мені відтінок та зафарбуй квітки.</p>\n    </section>\n  )\n}\n\nexport default Flowers;\n","export default __webpack_public_path__ + \"static/media/main-bg-orange.087156be.jpg\";","export default __webpack_public_path__ + \"static/media/main-bg-pink.7e61175a.jpg\";","export default __webpack_public_path__ + \"static/media/main-bg-violet.0e479edf.jpg\";","export default __webpack_public_path__ + \"static/media/main-bg-yellow.94fa6b70.jpg\";","import React from 'react';\n\nimport './styles.css';\nimport { COLORS, FAKE_COLORS, MQTT_TOPIC_PUBLISH, GAME_TIME_PLAY, idle_d,  user_id } from '../../const';\nimport { generateMessage } from '../../utils';\nimport CountDownTimer from '../CountDownTimer';\nimport Flowers from '../Flowers';\n\nconst Controls = ({ gameTime, activeColor, setActiveColor, mqtt }) => {\n  const onSelectColor = color => {\n    mqtt.publish(\n      MQTT_TOPIC_PUBLISH,\n      generateMessage(COLORS[color], user_id, GAME_TIME_PLAY, idle_d)\n    );\n    setActiveColor(color);\n  };\n\n  return (\n    <section className='controls-wrap'>\n      <Flowers activeColor={FAKE_COLORS[activeColor]} />\n      <section className='controls'>\n        <ul>\n          {Object.keys(COLORS).map((color, i) => (\n            <li\n              key={color}\n              className={activeColor === color ? `button-${i+1} active` : `button-${i+1}`}\n              onClick={() => onSelectColor(color)}\n              style={{ background: FAKE_COLORS[color] }}\n            />\n          ))}\n        </ul>\n        <CountDownTimer\n          timerClass='controls-timer'\n          timeLeft={gameTime}\n        />\n      </section>\n    </section>\n  );\n};\n\nexport default Controls;\n","export default __webpack_public_path__ + \"static/media/lotus-aqua.e0d01c2a.svg\";","export default __webpack_public_path__ + \"static/media/lotus-green.92564941.svg\";","export default __webpack_public_path__ + \"static/media/lotus-orange.17c89be0.svg\";","export default __webpack_public_path__ + \"static/media/lotus-pink.87b2eeeb.svg\";","export default __webpack_public_path__ + \"static/media/lotus-violet.8a14d3ad.svg\";","export default __webpack_public_path__ + \"static/media/lotus-yellow.dc894035.svg\";","import React from 'react';\n\nimport './styles.css';\nimport lotusAqua from '../../assets/lotus-aqua.svg';\nimport lotusGreen from '../../assets/lotus-green.svg'\nimport lotusOrange from '../../assets/lotus-orange.svg'\nimport lotusPink from '../../assets/lotus-pink.svg'\nimport lotusViolet from '../../assets/lotus-violet.svg'\nimport lotusYellow from '../../assets/lotus-yellow.svg'\n// import timerBg from '../../assets/timer-bg.svg';\n// import CountDownTimer from '../CountDownTimer';\n\nexport const LockedScreen = (/*{ appTime }*/) => (\n  <section className='locked-screen'>\n    <p className='locked-info'>Дякую за твій дотик!</p>\n    <p>Ти справжній митець.</p>\n    <p>Спробуй ще через пару хвилини.</p>\n    <div className='locked-img'>\n      <img className='lotus-1' src={lotusAqua} alt=\"lotusAqua\" />\n      <img className='lotus-2' src={lotusGreen} alt=\"lotusGreen\" />\n      <img className='lotus-3' src={lotusOrange} alt=\"lotusOrange\" />\n      <img className='lotus-4' src={lotusPink} alt=\"lotusPink\" />\n      <img className='lotus-5' src={lotusViolet} alt=\"lotusViolet\" />\n      <img className='lotus-6' src={lotusYellow} alt=\"lotusYellow\" />\n    </div>\n    {/* <div className='timer-wrapper'>\n      <img src={timerBg} alt='timer' className='timer-bg' />\n      <CountDownTimer timeLeft={appTime} />\n    </div> */}\n  </section>\n);\n\nexport const LockedScreen0 = (/*{ appTime }*/) => (\n  <section className='locked-screen'>\n    <p className='locked-info'>Зачекайте,</p>\n    <p>зараз управлiння</p>\n    <p>кимось зайняте</p>\n    <div className='locked-img'>\n      <img className='lotus-1' src={lotusAqua} alt=\"lotusAqua\" />\n      <img className='lotus-2' src={lotusGreen} alt=\"lotusGreen\" />\n      <img className='lotus-3' src={lotusOrange} alt=\"lotusOrange\" />\n      <img className='lotus-4' src={lotusPink} alt=\"lotusPink\" />\n      <img className='lotus-5' src={lotusViolet} alt=\"lotusViolet\" />\n      <img className='lotus-6' src={lotusYellow} alt=\"lotusYellow\" />\n    </div>\n    {/* <div className='timer-wrapper'>\n      <img src={timerBg} alt='timer' className='timer-bg' />\n      <CountDownTimer timeLeft={appTime} />\n    </div> */}\n  </section>\n);\n\n\n\n\n\n","export default __webpack_public_path__ + \"static/media/timer-bg.eda28634.svg\";","import React, { useState, useEffect } from 'react';\n\nimport { MQTT_TOPIC_PUBLISH, GAME_TIME_PLAY, idle_d, user_id } from '../../const';\nimport { generateMessage, generateMessageTest } from '../../utils';\n\nimport './styles.css';\nimport timerBg from '../../assets/timer-bg.svg';\n\nimport CountDownTimer from '../CountDownTimer';\n\nexport const ScreenTest = ({ mqtt }) => {\n  const onSelectEff = effNm => {\n\t  let req= generateMessageTest('{ \"r\": 99, \"g\": 0, \"b\": 0 }', user_id, GAME_TIME_PLAY, idle_d, effNm);\n\t  console.log(effNm,req);\n    mqtt.publish(\n      MQTT_TOPIC_PUBLISH,\n      req\n    );\n    //setActiveColor(color);\n  };\n  const onSetC = (r,g,b) => {\n\t  let req= generateMessage(`{ \"r\": ${r}, \"g\": ${g}, \"b\": ${b} }`, user_id, GAME_TIME_PLAY, idle_d);\n\t  console.log(req);\n    mqtt.publish(\n      MQTT_TOPIC_PUBLISH,\n      req\n    );\n  };\n  \nconst getCountdown = () => {\n\tlet now_t = new Date().getTime();\n\tlet gm_active_till_t = parseInt(localStorage.getItem('gm_active_till_t'));\n\t//console.log(!gm_active_till_t, now_t)\n\treturn 'user'+user_id+': '+(gm_active_till_t?Math.abs(Math.round((gm_active_till_t - now_t) / 1000)):'?');\n}\nconst [countdown_t, setCountdown] = useState(getCountdown());\nuseEffect(() => {\n  const timer = setInterval(() => {\n    setCountdown(getCountdown());\n  }, 1000);\n  return () => clearInterval(timer);\n});\n//, [countdown_t]);\n\n\n  return (\n  <section className='locked-screen'>\n    <p className='locked-info'></p>\n    <p ></p>\n\t<button onClick={() => onSelectEff('rnd')}>rnd</button>\n\t<button onClick={() => onSelectEff('fade_all_but_1')}>fade_all_but_1</button>\n\t<button onClick={() => onSelectEff('blink_1')}>blink_1 (TODO)</button>\n\t<button onClick={() => onSelectEff('epileptogen')}>epileptogen (TODO)</button>\n\t<button onClick={() => onSetC(255,0,0)}>R</button>\n\t<button onClick={() => onSetC(0,255,0)}>G</button>\n\t<button onClick={() => onSetC(0,0,255)}>B</button>\n\t<button onClick={() => onSetC(0,0,0)}>0</button>\n\t<button onClick={() => onSetC(255,255,255)}>255,255,255</button>\n\n    <div className='timer-wrapper'>\n      <img src={timerBg} alt='timer' className='timer-bg' />\n      <CountDownTimer timeLeft={countdown_t} />\n    </div>\n  </section>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { subscribe } from 'mqtt-react';\n\nimport {\n  MQTT_TOPIC_SUBSCRIBE,\n  GAME_TIME_PLAY,\n  user_id\n} from '../../const';\nimport { rgbStringify } from '../../utils';\n//import { setTimer } from '../../api';\nimport Controls from '../Controls';\nimport {LockedScreen, LockedScreen0} from '../LockedScreen';\nimport {ScreenTest} from '../ScreenTest';\n\n\nconst Game = ({ activeColor, setActiveColor, data, mqtt }) => {\n  const [gameTime, setGameTime] = useState(null);\n\n  //const game = localStorage.getItem('gameActive');\n  //const gameState = game ? JSON.parse(game) : true;\n  //const [gameActive, setGameActive] = useState(gameState);\n  \n  useEffect(() => {\n    if (data && data.length) {\n      const color = rgbStringify(data[0].color);\n      setActiveColor(color);\n    }\n    return null;\n  }, [data,setActiveColor]);\n\n  //useEffect(() => setGameTimer(), [gameActive]);\n  useEffect(() => setGameTimer());\n\n  useEffect(() => {\n    // if (gameTime === 0) {\n      // localStorage.setItem('gameActive', !gameActive);\n    // };\n//const timer = gameTime > 0 && setInterval(() => setGameTime(gameTime - 1), 1000);\n//console.log(gameTime);\n    const timer =  setInterval(() => {\n\t\tlet gm_active_till_t = parseInt(localStorage.getItem('gm_active_till_t'));\n\t\tlet countdown=(gm_active_till_t&&(gm_active_till_t-new Date().getTime())>0)?\tMath.floor((gm_active_till_t-new Date().getTime())/1000) :0;\n\t\tsetGameTime(countdown);\n\t\t}, 1000);\n    return () => clearInterval(timer);\n  }, [gameTime]);\n\n  const setGameTimer = () => {\n    //var activeGameTime = localStorage.getItem('activeTime');\n    //const isGameActive = JSON.parse(localStorage.getItem('gameActive'));\n\n    let now_t = new Date().getTime();\n    //const timeToPlay = now_t + (GAME_TIME_PLAY * 1000);\n\n\t/*\n    if (!activeGameTime) {\n      localStorage.setItem('gameActive', true);\n      //setTimer();\n      setGameTime(GAME_TIME_PLAY);\n      localStorage.setItem('activeTime', timeToPlay);\n      return;\n    }\n\t*/\n\n\t//activeGameTime=parseInt(activeGameTime);\n\t\n\tlet gm_active_till_t = parseInt(localStorage.getItem('gm_active_till_t'));\n//console.log(now_t, timeToPlay, activeGameTime, isGameActive, gm_active_till_t);\n\n    if (gm_active_till_t && (now_t < gm_active_till_t)) {\n      setGameTime(Math.round((gm_active_till_t - now_t) / 1000));\n      return;\n    };\n    // if ((now_t < activeGameTime) && isGameActive) {\n      // setGameTime(Math.round((activeGameTime - now_t) / 1000));\n      // return;\n    // };\n/*\n    if (now_t > activeGameTime) {\n      localStorage.setItem('gameActive', true);\n      //setTimer();\n      setGameActive(true);\n      setGameTime(GAME_TIME_PLAY);\n      localStorage.setItem('activeTime', timeToPlay);\n      return;\n    }*/\n  };\n\n//test\n//return <CountDownTimer />\n//return <LockedScreen0 />\n\n\t\n\tlet now_t=new Date().getTime();\n\t\n\tlet gm_active_till_t = parseInt(localStorage.getItem('gm_active_till_t'));\n\tlet bRunRecently=false;\n\tif(gm_active_till_t)\n\t{\n\t\tif(now_t < gm_active_till_t+60*20*1000)\n\t\t\tbRunRecently=true;\n\t\telse\n\t\t{\n\t\t\tlocalStorage.removeItem('gm_active_till_t');\n\t\t\tgm_active_till_t=null;\n\t\t}\n\t}\n\t\t\n\tconst redir = () => {\n\t\twindow.location.href = \"https://tsum.ua/\";//test: if(localStorage.getItem('test_redir')) redir();\n\t}\n\t\n\tif(data[0])\n\t{\n\t\t//console.log(data[0], data[0].user_active, user_id, gm_active_till_t-now_t);//, data[0].user_active, user_id, parseInt(data[0].user_active)==user_id\n\n\t\tvar user_active=parseInt(data[0].user_active);\n\t\t\n\t\tif (user_active===0)\n\t\t{\n\t\t\tif(bRunRecently) \n\t\t\t{//some time to other people can react on game open\n\t\t//TODO can be smaller than GAME_TIME_PLAY, if no other active users appear\n\t\t//TODO2 do not off game if nobody else connected\n\t\t\t\t//return <LockedScreenEnd />\n\t\t\t\tredir();\n\t\t\t}\n\t\t\t//else show interface to all users\n\t\t}\n\t\telse\n\t\tif (user_active)\n\t\t{\n\t\t\tif (user_active===user_id)\n\t\t\t{ //this user is active\n\t\t\t\tif(!gm_active_till_t) //at start of active\n\t\t\t\t{\n\t\t\t\t\tgm_active_till_t=Math.floor(now_t+GAME_TIME_PLAY*1000);\n\t\t\t\t\tlocalStorage.setItem('gm_active_till_t',gm_active_till_t);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(bRunRecently)\n\t\t\t\t\tredir();\n\t\t\t\telse\n\t\t\t\t\treturn <LockedScreen0 />\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{//no data from ESP\n\t\tif(window.location.search.includes('testesp'))\n\t\t{\t//'?testesp'\n\t\t\treturn <ScreenTest mqtt={mqtt} />\n\t\t}\n\t\tif(gm_active_till_t)\n\t\t{\n\t\t\tif(now_t>gm_active_till_t && now_t<gm_active_till_t+GAME_TIME_PLAY)\n\t\t\t{\n\t\t\t\tif(bRunRecently)\n\t\t\t\t\tredir();\n\t\t\t\telse\n\t\t\t\t\treturn <LockedScreen0 />\n\t\t\t}\n\t\t}\n\t\telse return <LockedScreen0 />\n\t}\n\t\n\tif(window.location.search.includes('testesp'))\n\t{\t//'?testesp'\n\t\treturn <ScreenTest mqtt={mqtt} />\n\t}\n\n  return (\n    <Controls\n      mqtt={mqtt}\n      gameTime={gameTime}\n      activeColor={activeColor}\n      setActiveColor={setActiveColor}\n    />\n  );\n};\n\nexport default subscribe({ topic: MQTT_TOPIC_SUBSCRIBE })(Game);\n","import React, { useState } from 'react';\n\nimport './styles.css';\nimport { COLOR_DEFAULT } from '../../const';\nimport logo from '../../assets/logo.svg';\nimport Game from '../Game';\n\nconst App = () => {\n  const [activeColor, setActiveColor] = useState(COLOR_DEFAULT);\n\n  return (\n    <section className='game'>\n      <a href='https://tsum.ua/' className='logo' target='_blank' rel=\"noreferrer\">\n        <img src={logo} alt='ЦУМ Киев'/>\n      </a>\n      <Game activeColor={activeColor} setActiveColor={setActiveColor} />\n    </section>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Connector } from 'mqtt-react';\n\nimport './index.css';\nimport App from './components/App';\n\nimport reportWebVitals from './reportWebVitals';\n\nconst mqttBrokerUrl = process.env.REACT_APP_MQTT_BROKER_URL;\n\nReactDOM.render(\n  <Connector mqttProps={mqttBrokerUrl}>\n    <App />\n  </Connector>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}